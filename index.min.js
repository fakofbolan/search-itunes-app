const searchFormEl=document.querySelector("#search-form"),searchQueryEl=document.querySelector("#search-query"),searchResultsEl=document.querySelector("#search-results"),loaderEl=document.querySelector(".loader"),songList=e=>{e.preventDefault(),searchResultsEl.innerHTML="";let s=searchQueryEl.value;fetch("./data.json").then(e=>e.json()).then(e=>{let r=!1,l=e.results;for(let t=0;t<l.length;t++){let a=l[t].artistName,o=l[t].trackName,n=l[t].previewUrl,i=l[t].artworkUrl100,c=a.toLowerCase().includes(s.toLowerCase()),d=o.toLowerCase().includes(s.toLowerCase());(c||d)&&(r=!0,searchResultsEl.innerHTML+=`<div class="song">
                <img src="${i}" class="song-img">
                <div class="artist">${a}</div>
                <div class="track">${o}</div>
                <audio controls class="play">
                  <source src="${n}" type="audio/x-m4a">
                </audio>
              <div>`),r||t!==l.length-1||(searchResultsEl.innerHTML='<div class="no-result">No results</div>'),""===s&&(searchResultsEl.innerHTML="")}})};document.addEventListener("play",e=>{let s=document.getElementsByTagName("audio");for(let r=0;r<s.length;r++)s[r]!=e.target&&s[r].pause()},!0),searchFormEl.addEventListener("keyup",function(e){loaderEl.classList.remove("hide"),searchResultsEl.innerHTML="",setTimeout(function(){loaderEl.classList.add("hide"),songList(e)},2e3)}),searchFormEl.addEventListener("submit",function(e){loaderEl.classList.remove("hide"),searchResultsEl.innerHTML="",setTimeout(function(){loaderEl.classList.add("hide"),songList(e)},2e3)});